<launch>
     <arg name="flag_test"          default="true"/>
     <arg name="debug"              default="true"/>
     <arg if="$(arg flag_test)"     name="namespace" default="/hytx/rtabmap"/>
     <arg unless="$(arg flag_test)" name="namespace" default="rtabmap"/>
     <!-- roslaunch prefix args -->
     <arg name="args"                    default="--delete_db_on_start"/>              <!-- delete_db_on_start, udebug -->
     <arg name="rtabmap_args"            default="$(arg args)"/>
     <arg name="odom_args"               default="$(arg args)"/>
     <arg unless="$(arg debug)" name="launch_prefix"           default=""/>              <!-- for debugging purpose, it fills launch-prefix tag of the nodes -->
     <arg if="$(arg debug)" name="launch_prefix"           default="gdb -ex run --args"/>              <!-- for debugging purpose, it fills launch-prefix tag of the nodes -->

     <!-- Flags -->
     <arg name="publish_tf_odom"           default="false"/>

     <!-- ICP Odometry -->
     <group ns="$(arg namespace)">
          <node pkg="rtabmap_ros" type="icp_odometry" name="icp_odometry" output="screen" args="$(arg rtabmap_args) $(arg odom_args)" launch-prefix="$(arg launch_prefix)">
               <remap from="scan_cloud"             to="/swansonPi4/sweep/pc"/>
               <remap from="odom"                   to="/icp_odom"/>
               <remap from="imu"                    to="/swansonPi4/imu/data/raw"/>

               <param name="frame_id"                    type="string" value="laser"/>
               <param name="odom_frame_id"               type="string" value="odom"/>
               <param name="publish_tf"                  type="bool"   value="$(arg publish_tf_odom)"/>
               <param name="wait_imu_to_init"            type="bool"   value="true"/>
               <param name="scan_normal_k"               type="int" value="0"/>
               <param name="scan_normal_radius"          type="double" value="0"/>
               <!-- <param name="guess_frame_id"              type="string" value="odom"/> -->

               <!-- ICP parameters -->
               <!-- <param name="Icp/Iterations"          type="string" value="10"/>
               <param name="Icp/DownsamplingStep"    type="string" value="1"/>
               <param name="Icp/VoxelSize"           type="string" value="0.2"/>
               <param name="Icp/PointToPlane"        type="string" value="true"/>
               <param name="Icp/Epsilon"             type="string" value="0.001"/>
               <param name="Icp/PointToPlaneK"       type="string" value="20"/>
               <param name="Icp/PointToPlaneRadius"  type="string" value="0"/>
               <param name="Icp/MaxTranslation"      type="string" value="2"/>
               <param name="Icp/MaxCorrespondenceDistance" type="string" value="1"/>
               <param name="Icp/PM"                  type="string" value="true"/>
               <param name="Icp/PMOutlierRatio"      type="string" value="0.7"/>
               <param name="Icp/CorrespondenceRatio" type="string" value="0.01"/>   -->

               <!-- Odom parameters -->
               <!-- <param name="Odom/ScanKeyFrameThr"       type="string" value="0.9"/>
               <param name="Odom/Strategy"              type="string" value="0"/>
               <param name="OdomF2M/ScanSubtractRadius" type="string" value="0.2"/>
               <param name="OdomF2M/ScanMaxSize"        type="string" value="360"/> -->
          </node>

     </group>
</launch>
